webpackJsonp([12],{490:function(n,s){n.exports={content:["article",["h1","\u4e0a\u4e0b\u62c9\u5237\u65b0"],["h3","\u7ec4\u4ef6\u63cf\u8ff0"],["p","\u63d0\u4f9b\u4e0a\u4e0b\u62c9\u5237\u65b0\u80fd\u529b"],["h3","\u4ee3\u7801\u793a\u4f8b"],["pre",{lang:"js",highlighted:'<span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\t<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token keyword">var</span> ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListView<span class="token punctuation">.</span>DataSource</span><span class="token punctuation">(</span><span class="token punctuation">{</span> rowHasChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>r1<span class="token punctuation">,</span> r2<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> r1 <span class="token operator">!==</span> r2 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">,</span> <span class="token string">\'\u6211\u662f\u4e00\u4e2acell\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\t<span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n\t\tdataSource<span class="token punctuation">:</span> ds<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>\n\t<span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token operator">&lt;</span>RefreshView\n\tonRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>RefreshView<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onRefresh</span><span class="token punctuation">(</span>RefreshView<span class="token punctuation">)</span><span class="token punctuation">}</span>\n\tonLoadMore<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>RefreshView<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onLoadmore</span><span class="token punctuation">(</span>RefreshView<span class="token punctuation">)</span><span class="token punctuation">}</span>\n\tuseLoadMore<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>\n<span class="token operator">></span>\n\t<span class="token operator">&lt;</span>ListView\n\t\tdataSource<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">}</span>\n\t\trenderSeparator<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>View key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sectionID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rowID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>separator<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>\n\t\trenderRow<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>rowData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>rowItem<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token number">16</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>rowData<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">></span><span class="token punctuation">}</span>\n\t<span class="token operator">/</span><span class="token operator">></span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>RefreshView<span class="token operator">></span>\n\n<span class="token function">onRefresh</span><span class="token punctuation">(</span>RefreshView<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\tconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'refresh\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\t\tRefreshView<span class="token punctuation">.</span><span class="token function">refreshed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">onLoadmore</span><span class="token punctuation">(</span>RefreshView<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\t<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>\n\t<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\n\t\tself<span class="token punctuation">.</span>data <span class="token operator">=</span> self<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'\u6211\u662f\u4e00\u4e2acell(\u65b0)\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\tself<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t\t\tdataSource<span class="token punctuation">:</span> self<span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>data<span class="token punctuation">)</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\tRefreshView<span class="token punctuation">.</span><span class="token function">loaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token comment" spellcheck="true">//\u6ca1\u6709\u6570\u636e\u4e86\uff0c\u6ca1\u6709\u52a0\u8f7d\u66f4\u591a\uff0c\u5219useLoadMore\u8d4b\u503c\u4e3afalse</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\tconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'onLoadMore\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>'},["code","constructor(props) {\n\tsuper(props);\n\tvar ds = new ListView.DataSource({ rowHasChanged: (r1, r2) => r1 !== r2 });\n\tthis.data = ['\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell', '\u6211\u662f\u4e00\u4e2acell'];\n\tthis.state = {\n\t\tdataSource: ds.cloneWithRows(this.data),\n\t}\n}\n\n<RefreshView\n\tonRefresh={(RefreshView) => this.onRefresh(RefreshView)}\n\tonLoadMore={(RefreshView) => this.onLoadmore(RefreshView)}\n\tuseLoadMore={true}\n>\n\t<ListView\n\t\tdataSource={this.state.dataSource}\n\t\trenderSeparator={(sectionID, rowID) => <View key={`${sectionID}-${rowID}`} style={styles.separator} />}\n\t\trenderRow={(rowData) => <View style={styles.rowItem}><Text style={{ fontSize: 16 }}>{rowData}</Text></View>}\n\t/>\n</RefreshView>\n\nonRefresh(RefreshView) {\n\tconsole.log('refresh');\n\tsetTimeout(function () {\n\t\tRefreshView.refreshed();\n\t}, 5000);\n}\n\nonLoadmore(RefreshView) {\n\tvar self = this;\n\tsetTimeout(function () {\n\n\t\tself.data = self.data.concat(['\u6211\u662f\u4e00\u4e2acell(\u65b0)']);\n\t\tself.setState({\n\t\t\tdataSource: self.state.dataSource.cloneWithRows(self.data)\n\t\t});\n\t\tRefreshView.loaded();\n\t\t//\u6ca1\u6709\u6570\u636e\u4e86\uff0c\u6ca1\u6709\u52a0\u8f7d\u66f4\u591a\uff0c\u5219useLoadMore\u8d4b\u503c\u4e3afalse\n\t}, 5000);\n\tconsole.log('onLoadMore');\n}"]],["h2","API"],["h3","api \u63a5\u53e3\uff1a"],["h3","refreshed()"],["p","\u5f53\u5237\u65b0\u5b8c\u6210\u540e\u8c03\u7528\uff0c\u7528\u4ee5\u5c06\u89c6\u89c9\u8fd8\u539f\u3002"],["h3","loaded()"],["p","\u5f53\u52a0\u8f7d\u66f4\u591a\u6570\u636e\u5b8c\u6210\u540e\u8c03\u7528\uff0c\u7528\u4e8e\u5c06\u89c6\u89c9\u8fd8\u539f\uff0c\u5e76\u4e14\u8bbe\u5b9a\u5f53\u524d\u4e3a\u53ef\u6ed1\u52a8\u72b6\u6001\u3002"],["h3","props\u5217\u8868"],["table",["thead",["tr",["th","\u5c5e\u6027"],["th","\u8bf4\u660e"],["th","\u7c7b\u578b"],["th","\u9ed8\u8ba4\u503c"]]],["tbody",["tr",["td","onStatusChange"],["td","\u5237\u65b0\u72b6\u6001\u56de\u8c03"],["td","function"],["td"]],["tr",["td","onRefresh"],["td","\u89e6\u53d1\u5237\u65b0\u7684\u56de\u8c03"],["td","function"],["td"]],["tr",["td","onLoadMore"],["td","\u89e6\u53d1\u52a0\u8f7d\u66f4\u591a\u7684\u56de\u8c03"],["td","function"],["td"]],["tr",["td","topIndicatorHeight"],["td","\u9876\u90e8\u4e0b\u62c9\u9ad8\u5ea6"],["td","number"],["td","config.topHeight\u8bfb\u53d6\uff1a60"]],["tr",["td","bottomIndicatorHeight"],["td","\u5e95\u90e8\u4e0a\u62c9\u9ad8\u5ea6"],["td","number"],["td","config.bottomHeight\u8bfb\u53d6\uff1a60"]],["tr",["td","pullImageView"],["td","\u4e0b\u62c9gif\u56fe\u7247\u6570\u7ec4"],["td","array"],["td","\u4f7f\u7528\u5185\u7f6eImageManager\u4e2d\u52a0\u8f7d\u56fe\u7247\u6570\u7ec4"]],["tr",["td","loadMoreView"],["td","\u52a0\u8f7d\u66f4\u591agif\u56fe\u7247\u6570\u7ec4"],["td","array"],["td","\u4f7f\u7528\u5185\u7f6eImageManager\u4e2d\u52a0\u8f7d\u56fe\u7247\u6570\u7ec4"]],["tr",["td","duration"],["td","\u52a8\u753b\u6301\u7eed\u65f6\u957f"],["td","number"],["td","300"]],["tr",["td","refreshType"],["td","\u5237\u65b0\u7684type\uff0c\u6709text\uff0cnormal\uff0ccustom\u53ef\u9009"],["td","string"],["td","'normal'"]],["tr",["td","useLoadMore"],["td","\u662f\u5426\u6709\u52a0\u8f7d\u66f4\u591a\u529f\u80fd"],["td","boolen"],["td","false"]],["tr",["td","customView"],["td","\u81ea\u5b9a\u4e49\u5934\u90e8"],["td","object"],["td","null"]],["tr",["td","customBottomView"],["td","\u81ea\u5b9a\u4e49\u5e95\u90e8"],["td","object"],["td","null"]],["tr",["td","styleType"],["td","\u5185\u90e8\u52a0\u8f7d\u56fe\u7247\u7684\u6837\u5f0f"],["td","string"],["td","config.styleType\u8bfb\u53d6\uff1a'light'"]]]],["h3","\u6837\u5f0f\u5bf9\u8c61styles"]],meta:{title:"RefreshView",subTitle:"\u4e0a\u4e0b\u62c9\u5237\u65b0",filename:"components/ui/RefreshView/README.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h1",href:"#\u4e0a\u4e0b\u62c9\u5237\u65b0",title:"\u4e0a\u4e0b\u62c9\u5237\u65b0"},"\u4e0a\u4e0b\u62c9\u5237\u65b0"]],["li",["a",{className:"bisheng-toc-h3",href:"#\u7ec4\u4ef6\u63cf\u8ff0",title:"\u7ec4\u4ef6\u63cf\u8ff0"},"\u7ec4\u4ef6\u63cf\u8ff0"]],["li",["a",{className:"bisheng-toc-h3",href:"#\u4ee3\u7801\u793a\u4f8b",title:"\u4ee3\u7801\u793a\u4f8b"},"\u4ee3\u7801\u793a\u4f8b"]],["li",["a",{className:"bisheng-toc-h2",href:"#API",title:"API"},"API"]],["li",["a",{className:"bisheng-toc-h3",href:"#api-\u63a5\u53e3\uff1a",title:"api \u63a5\u53e3\uff1a"},"api \u63a5\u53e3\uff1a"]],["li",["a",{className:"bisheng-toc-h3",href:"#refreshed()",title:"refreshed()"},"refreshed()"]],["li",["a",{className:"bisheng-toc-h3",href:"#loaded()",title:"loaded()"},"loaded()"]],["li",["a",{className:"bisheng-toc-h3",href:"#props\u5217\u8868",title:"props\u5217\u8868"},"props\u5217\u8868"]],["li",["a",{className:"bisheng-toc-h3",href:"#\u6837\u5f0f\u5bf9\u8c61styles",title:"\u6837\u5f0f\u5bf9\u8c61styles"},"\u6837\u5f0f\u5bf9\u8c61styles"]]]}}});